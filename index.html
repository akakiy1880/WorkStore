<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>–û—Ñ–∏—Å –ú–∞—Ä–∫–µ—Ç üõí</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* CSS –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É (—Å–∂–∞—Ç—ã–π) –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        :root {
            --text-main: #1e293b;
            --text-secondary: #64748b;
            --primary: #087bff;
            --primary-glow: #3794ff66;
            --glass-bg: rgba(255, 255, 255, 0.65);
            --glass-border: rgba(255, 255, 255, 0.6);
            --bg-day: radial-gradient(circle at 50% 10%, #fbbf24 0%, rgba(255, 255, 255, 0) 20%), linear-gradient(180deg, #60a5fa 0%, #bfdbfe 50%, #fef3c7 100%);
            --bg-night: radial-gradient(circle at 50% 3%, #e2e8f0 3%, rgba(255, 255, 255, 0) 10%), linear-gradient(180deg, #0f172a 0%, #1e1b4b 60%, #312e81 100%);
            --theme-toggle-bg-day: rgba(0, 0, 0, 0.1);
            --theme-toggle-fg-day: #fff;
            --theme-toggle-bg-night: rgba(255, 255, 255, 0.1);
            --theme-toggle-fg-night: #27272a
        }

        .dark-mode {
            --text-main: #e2e8f0;
            --text-secondary: #94a3b8;
            --primary: #087bff;
            --glass-bg: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1)
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            padding-bottom: 240px;
            background: var(--bg-day);
            background-attachment: fixed;
            background-size: cover;
            transition: background 0.5s ease;
            color: var(--text-main)
        }

        .dark-mode {
            background: var(--bg-night);
            background-attachment: fixed;
            background-size: cover
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15)
        }

        header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 12px 16px;
            margin-bottom: 10px
        }

        .header-grid {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            max-width: 800px;
            margin: 0 auto
        }

        .btn-request {
            justify-self: start;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid var(--glass-border);
            color: var(--text-main);
            padding: 8px 14px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            transition: 0.2s
        }

        .btn-request:active {
            transform: scale(0.95)
        }

        .brand {
            text-align: center
        }

        .brand h1 {
            font-size: 18px;
            font-weight: 800;
            margin: 0;
            background: linear-gradient(90deg, var(--text-main), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent
        }

        .brand span {
            font-size: 11px;
            opacity: 0.7;
            display: block
        }

        .theme-toggle {
            justify-self: end
        }

        /* –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ö–ù–û–ü–ö–ò –¢–ï–ú–´ */
        .theme-toggle-btn {
            width: 50px;
            height: 28px;
            border-radius: 30px;
            border: none;
            padding: 0;
            cursor: pointer;
            position: relative;
            background: var(--theme-toggle-bg-day);
            transition: background 0.3s ease
        }

        .dark-mode .theme-toggle-btn {
            background: var(--theme-toggle-bg-night)
        }

        /* –£–±—Ä–∞–ª–∏ content –∏ —Ñ–æ–Ω–æ–≤—ã–π —Ü–≤–µ—Ç, –¥–æ–±–∞–≤–∏–ª–∏ —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–ª–Ω—Ü–∞ */
        .theme-toggle-btn::before {
            content: '';
            position: absolute;
            height: 22px;
            width: 22px;
            top: 3px;
            left: 3px;
            border-radius: 50%;
            transition: transform 0.3s ease, background 0.3s ease;
            background: url('https://png.klev.club/uploads/posts/2024-04/png-klev-club-rfb6-p-solntse-png-9.png') center/cover no-repeat
        }

        /* –£–±—Ä–∞–ª–∏ content –∏ —Ñ–æ–Ω–æ–≤—ã–π —Ü–≤–µ—Ç, –¥–æ–±–∞–≤–∏–ª–∏ —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª—É–Ω—ã –ø—Ä–∏ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
        .dark-mode .theme-toggle-btn::before {
            transform: translateX(22px);
            background: url('https://st4.depositphotos.com/12328584/28866/i/450/depositphotos_288668274-stock-illustration-moon-isolated-on-white-background.jpg') center/cover no-repeat
        }

        /* –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô */

        .controls-container {
            max-width: 600px;
            margin: 0 auto 20px;
            padding: 0 16px;
            display: flex;
            flex-direction: column;
            gap: 12px
        }

        .search-box {
            position: relative;
            width: 100%
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 45px;
            border-radius: 18px;
            border: none;
            background: var(--glass-bg);
            color: var(--text-main);
            font-size: 14px;
            outline: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05)
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: var(--text-secondary)
        }

        .categories-wrapper {
            overflow-x: auto;
            white-space: nowrap;
            padding-bottom: 5px;
            scrollbar-width: none
        }

        .categories-wrapper::-webkit-scrollbar {
            display: none
        }

        .cat-pill {
            display: inline-block;
            padding: 8px 16px;
            margin-right: 8px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.5);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: 0.3s
        }

        .dark-mode .cat-pill {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1)
        }

        .cat-pill.active {
            background: var(--primary);
            color: #fff;
            border: 1px solid var(--primary);
            box-shadow: 0 4px 12px var(--primary-glow)
        }

        .container {
            padding: 0 16px;
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 16px
        }

        .card {
            border-radius: 24px;
            padding: 12px;
            display: flex;
            gap: 14px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s
        }

        /* –û–±–≤–æ–¥–∫–∞ –∏ –±–µ–π–¥–∂ –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ */
        .new-product {
            border: 2px solid var(--primary);
            box-shadow: 0 8px 24px rgba(8, 123, 255, 0.12);
        }

        .new-badge {
            position: absolute;
            top: 10px;
            left: 12px;
            background: var(--primary);
            color: #fff;
            font-size: 12px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 12px;
            z-index: 5;
            box-shadow: 0 4px 10px rgba(8, 123, 255, 0.18);
        }

        /* OUT OF STOCK */
        .out-badge {
            position: absolute;
            top: 10px;
            right: 12px;
            background: #ef4444;
            color: #fff;
            font-size: 12px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 12px;
            z-index: 6;
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.18);
        }

        .card.out-of-stock {
            opacity: 0.6;
        }

        .out-label {
            padding: 8px 12px;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.06);
            color: var(--text-secondary);
            font-weight: 700;
            font-size: 13px;
        }
        /* END OUT OF STOCK */

        /* DISCOUNT: –∫—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂ –∏ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–º–∫–∞ */
        .discount-badge {
            position: absolute;
            top: 10px;
            right: 12px;
            z-index: 7;
            display: inline-block;
            padding: 6px 10px;
            color: #fff;
            font-weight: 800;
            font-size: 12px;
            letter-spacing: 0.5px;
            transform: skew(-12deg) rotate(-6deg);
            background: linear-gradient(135deg,#ff3b30 0%, #ff7a7a 100%);
            box-shadow: 0 8px 20px rgba(255,59,48,0.22), inset 0 -4px 0 rgba(255,255,255,0.06);
            border-radius: 8px;
            border: 2px solid rgba(255,255,255,0.08);
        }

        .discount-card {
            /* glass background, –Ω–æ —Å –∫—Ä–∞—Å–Ω–æ–π –æ–±–≤–æ–¥–∫–æ–π */
            background: var(--glass-bg) !important;
            color: var(--text-main);
            box-shadow:
                0 8px 24px rgba(255,75,75,0.06), /* –ª—ë–≥–∫–∞—è –∫—Ä–∞—Å–Ω–∞—è —Ç–µ–Ω—å */
                0 2px 8px rgba(0,0,0,0.04);
            border-radius: 24px;
            border: 2px solid rgba(255,75,75,0.95) !important; /* –∫—Ä–∞—Å–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ */
        }

        /* –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∫—Ä–∞—Å–Ω–∞—è –æ–±–≤–æ–¥–∫–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä –æ—Ç–º–µ—á–µ–Ω new-product */
        .discount-card.new-product {
            border: 2px solid rgba(255,65,65,0.98) !important;
            box-shadow: 0 12px 32px rgba(255,60,60,0.12);
        }

        .discount-card .card-img-container {
            background: rgba(255,255,255,0.08);
        }


        .discount-card .old-price {
            color: var(--text-secondary);
        }

        .discount-card .price {
            color: var(--primary);
        }

        .old-price {
            font-size: 12px;
            color: var(--text-secondary);
            text-decoration: line-through;
            margin: 0 0 6px 0;
            display: block;
        }

        .card-img-container {
            width: 85px;
            height: 85px;
            border-radius: 18px;
            background: #fff;
            padding: 5px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center
        }

        .card-img {
            width: 100%;
            height: 100%;
            object-fit: contain
        }

        .card-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between
        }

        .card-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 2px
        }

        .card-desc {
            font-size: 12px;
            color: var(--text-secondary)
        }

        .card-bottom {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 6px;
            height: 32px
        }

        /* fix height for alignment */
        .price {
            font-size: 16px;
            font-weight: 800;
            color: var(--primary)
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å" */
        .btn-add {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            box-shadow: 0 4px 10px var(--primary-glow);
            cursor: pointer;
            transition: transform 0.2s
        }

        .btn-add:active {
            transform: scale(0.95)
        }

        /* --- –°–¢–ò–õ–ò –î–õ–Ø –°–ß–ï–¢–ß–ò–ö–ê (–≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏) --- */
        .counter-widget {
            display: flex;
            align-items: center;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 2px;
            gap: 2px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05)
        }

        .btn-qty {
            width: 28px;
            height: 28px;
            border: none;
            background: #fff;
            border-radius: 10px;
            color: var(--primary);
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: 0.2s
        }

        .btn-qty:active {
            transform: scale(0.9);
            background: #f1f5f9
        }

        .qty-val {
            min-width: 24px;
            text-align: center;
            font-size: 14px;
            font-weight: 700;
            color: var(--text-main)
        }

        .dark-mode .btn-qty {
            background: rgba(255, 255, 255, 0.1);
            color: #fff
        }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .bottom-sheet {
            position: fixed;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 32px);
            max-width: 500px;
            border-radius: 28px;
            padding: 20px;
            z-index: 200
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px
        }

        .total-amount {
            font-size: 20px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
            /* –î–æ–±–∞–≤–ª–µ–Ω–æ, —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏—è –Ω–µ –≤–ª–∏—è–ª–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
            position: relative;
        }

        /* === –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ê–ù–ò–ú–ê–¶–ò–ò –¶–ï–ù–´ === */
        @keyframes pricePulse {
            0% {
                transform: scale(1);
                opacity: 1;
                text-shadow: 0 0 0px var(--primary-glow);
            }

            50% {
                transform: scale(1.08);
                opacity: 1;
                color: var(--primary);
                text-shadow: 0 0 10px var(--primary-glow);
            }

            100% {
                transform: scale(1);
                opacity: 1;
                text-shadow: 0 0 0px var(--primary-glow);
            }
        }

        #total-price.price-change-anim {
            animation: pricePulse 0.4s ease-in-out;
        }

        /* ================================== */


        .btn-copy-total {
            background: var(--text-main);
            color: var(--primary);
            border: none;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s
        }

        .btn-copy-total:active {
            transform: scale(0.95)
        }

        .pay-card {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border-radius: 18px;
            padding: 16px;
            color: #fff;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            user-select: none;
            cursor: pointer
        }

        .card-num {
            font-family: monospace;
            font-size: 16px;
            letter-spacing: 2px;
            color: #fff !important;
            text-decoration: none !important
        }

        .copy-tag {
            background: rgba(255, 255, 255, 0.2);
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 6px;
            margin-left: auto
        }

        .btn-pay-click {
            width: 100%;
            padding: 16px;
            background: #087BFF;
            color: #fff;
            border: none;
            border-radius: 18px;
            font-size: 16px;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(8, 123, 255, 0.4);
            cursor: pointer
        }

        .btn-pay-click:active {
            transform: scale(0.98)
        }

        .toast {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%) scale(0.9);
            background: #10b981;
            color: #fff;
            padding: 10px 20px;
            border-radius: 30px;
            opacity: 0;
            pointer-events: none;
            transition: 0.3s;
            z-index: 500;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            gap: 8px;
            align-items: center;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.4)
        }

        .toast.visible {
            opacity: 1;
            transform: translateX(-50%) scale(1)
        }
    </style>
</head>

<body>
    <header class="glass-panel">
        <div class="header-grid">
            <a href="https://forms.gle/PtGTZbj7RKDz5hT48" target="_blank" class="btn-request">üìã –ó–∞–∫–∞–∑</a>
            <div class="brand">
                <h1>–û—Ñ–∏—Å –ú–∞—Ä–∫–µ—Ç</h1>
                <span>–°–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</span>
            </div>
            <div class="theme-toggle">
                <button class="theme-toggle-btn" onclick="toggleTheme()"></button>
            </div>
        </div>
    </header>

    <div class="controls-container">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" class="search-input" id="search-input" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..."
                oninput="handleSearch()">
        </div>
        <div class="categories-wrapper" id="categories-container"></div>
    </div>

    <div class="container" id="products-list"></div>

    <div class="bottom-sheet glass-panel">
        <div class="total-row">
            <div>
                <span class="total-label">–ö –æ–ø–ª–∞—Ç–µ:</span>
            </div>
            <div class="total-amount" id="total-price-container">
                <span id="total-price">0 —Å—É–º</span>
                <button class="btn-copy-total" onclick="copyTotal()">üìã</button>
            </div>
        </div>
        <div class="pay-card" onclick="copyCard()">
            <div style="display:flex; justify-content:space-between; margin-bottom:4px; font-size:10px; opacity:0.7;">
                <span>–ö–ê–†–¢–ê</span><span>–ù–ê–ñ–ú–ò–¢–ï –ß–¢–û–ë–´ –°–ö–û–ü–ò–†–û–í–ê–¢–¨</span>
            </div>
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span class="card-num" style="white-space: nowrap;">9860 2401 0185 6518</span>
                <span class="copy-tag">COPY</span>
            </div>
        </div>
        <button class="btn-pay-click" onclick="goToClickPayment()">–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ CLICK</button>
    </div>

    <div class="toast" id="toast">‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>

    <script>
        const productsRaw = [
            // --- DRINKS (–ù–∞–ø–∏—Ç–∫–∏) ---
            { name: "Santal", desc: "–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–¥–∞, 1.5–ª", price: 5000, category: "drinks", img: "https://images.uzum.uz/cupd0qmi4n324lral8ig/original.jpg", },
            { name: "Bonaqua", desc: "–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–¥–∞, 1.5–ª", price: 6500, category: "drinks", img: "https://images.uzum.uz/ciaiv2r6edfostihitb0/original.jpg" },
            { name: "Coca-Cola", desc: "0.5–ª", price: 7000, category: "drinks", img: "https://images.uzum.uz/cf7b7qqvtie1lhbhbk00/original.jpg" },
            { name: "Coca-Cola Zero", desc: "0.5–ª", price: 7000, category: "drinks", img: "https://www.eventfood.com.ua/wp-content/uploads/2021/04/coca-cola-zero-0.5.jpg" },
            { name: "Coca-Cola Zero", desc: "1.0–ª", price: 11000, category: "drinks", img: "https://images.uzum.uz/cegs9kol08kcldtp08d0/original.jpg" },
            { name: "Pepsi Zero", desc: "1.5–ª", price: 12000, category: "drinks", img: "https://images.uzum.uz/cqf37mcqvss6ad8j5no0/original.jpg" },
            { name: "Sprite", desc: "1.5–ª", price: 15000, category: "drinks", img: "https://devel.prom.uz/upload/product_logos/35/72/3572a71675d530ee1d2858a786a83864.jpeg" },
            { name: "Fanta", desc: "1.5–ª", price: 15000, category: "drinks", img: "https://images.uzum.uz/ce8a878v1htd23airm6g/original.jpg" },
            { name: "Coca-Cola", desc: "2.0–ª", price: 19000, category: "drinks", img: "https://images.uzum.uz/cia493tenntd8rfc2s40/original.jpg" },
            { name: "Coca-Cola", desc: "2.5–ª", price: 24000, category: "drinks", img: "https://images.uzum.uz/ctcmjulpb7f7ago8e8fg/original.jpg" },

            // --- SWEETS (–°–ª–∞–¥–æ—Å—Ç–∏) ---
            { name: "Tic Tac –ú—è—Ç–∞ (–º–∞–ª–µ–Ω—å–∫–∏–π)", desc: "33—à—Ç, 16–≥", price: 10000, category: "sweets", img: "https://images.uzum.uz/d4jcoi6j76oneqamsq0g/original.jpg" },
            { name: "Tic Tac –Ø–≥–æ–¥–Ω—ã–π –º–∏–∫—Å (–º–∞–ª–µ–Ω—å–∫–∏–π)", desc: "33—à—Ç, 16–≥", price: 10000, category: "sweets", img: "https://images.uzum.uz/d4jcjb5sp2tr82i6v4u0/original.jpg" },
            { name: "Tic Tac –ê–ø–µ–ª—å—Å–∏–Ω (–º–∞–ª–µ–Ω—å–∫–∏–π)", desc: "33—à—Ç, 16–≥", price: 10000, category: "sweets", img: "https://images.uzum.uz/d4jci7dv2sjnqk4j5c0g/original.jpg" },
            { name: "Twix", desc: "72–≥", price: 14000, category: "sweets", img: "https://yastatic.net/avatars/get-grocery-goods/2888787/581b2738-67db-4482-bda5-7a46804ed816/300x300?webp=true" },
            { name: "KitKat", desc: "64–≥", price: 14000, category: "sweets", img: "https://yastatic.net/avatars/get-grocery-goods/2998515/a97dff15-d08e-4d85-b72f-aaafe648abad/464x464-origin" },
            { name: "Snickers", desc: "80–≥", price: 14000, category: "sweets", img: "https://semeiniy.kz/wa-data/public/shop/products/19/61/116119/images/36041/36041.970.jpg" },
            { name: "Haribo Goldbears", desc: "80–≥", price: 14000, category: "sweets", img: "https://images.uzum.uz/cet940ov1htd23akg6q0/original.jpg", oldprice: 16000, discount: true},
            { name: "Haribo Mix", desc: "80–≥", price: 14000, category: "sweets", img: "https://images.uzum.uz/csbma5bvgbkl7nol3nh0/original.jpg", oldprice: 16000, discount: true },
            { name: "Tic Tac –ú—è—Ç–∞ (–±–æ–ª—å—à–æ–π)", desc: "100—à—Ç, 49–≥", price: 20000, category: "sweets", img: "https://images.uzum.uz/d4jcfuuj76oneqamsgv0/original.jpg" },
            { name: "Kinder Chocolate", desc: "8 –ø–æ—Ä—Ü–∏–π, 100–≥", price: 24000, category: "sweets", img: "https://images.uzum.uz/csiu7534nkdv7h9iqorg/original.jpg" },

            // --- COFFEE ---
            { name: "Jacobs Original", desc: "Original 13.5–≥", price: 4000, category: "coffee", img: "https://officemax.uz/media/uploads/1_eKw5t9g.jpg", isNew: true },
            { name: "MacCoffee", desc: "Cappuccino 25–≥", price: 5000, category: "coffee", img: "https://images.uzum.uz/ckv4lslennt861inogag/original.jpg" },
            { name: "Jacobs Milka", desc: "Original 18–≥", price: 6000, category: "coffee", img: "https://yastatic.net/avatars/get-grocery-goods/2998515/c17900b0-bda9-4dda-9224-afd7fcd04f89/300x300?webp=true", isNew: true },

            // --- ENERGY ---
            { name: "Adrenaline Rush", desc: "0.449–ª", price: 17000, category: "energy_drinks", img: "https://images.uzum.uz/cq7sp8ffrr885gh1ls80/original.jpg" },
            { name: "Gorilla Zero Shuar", desc: "0.449–ª", price: 15000, category: "energy_drinks", img: "https://vsabrine.kz/wp-content/uploads/4870022003695.jpg", isNew: true},
            // --- SPORT ---
            { name: "Primekraft", desc: "–®–æ–∫–æ–ª–∞–¥ 40–≥", price: 10000, oldprice: 12000, category: "sport", img: "https://primekraft.ru/upload/iblock/2b4/va70v88jo2doxjs92hpi107xbzad223f.png", discount: true},
            { name: "Bombbar –ë–∞—Ç–æ–Ω—á–∏–∫–∏ 40–≥ (–º–∏–Ω–∏)", desc: "–ê—Å—Å–æ—Ä—Ç–∏ 40–≥", price: 18000, category: "sport", img: "https://enzym.ru/imagecache/card/storage/products/43/70/43703/9f72c9aaeff0914b35b272c0046e7cded25095d9.jpg", isNew: true },
            { name: "Bombbar –ë–∞—Ç–æ–Ω—á–∏–∫–∏ 60–≥ (–º–∞–∫—Å–∏)", desc: "–ê—Å—Å–æ—Ä—Ç–∏ 60–≥", price: 24000, category: "sport", img: "https://avatars.mds.yandex.net/get-mpic/7381431/img_id2127036567216787885.jpeg/orig", isNew: true },

            // --- TOBACCO ---
            { name: "Kent Mix (—Ç–æ–ª—Å—Ç—ã–µ)", desc: "–ü–∞—á–∫–∞", price: 20000, category: "tobacco", img: "https://backend.magnit.tj/uploads/images/027ad84e400b8ca4573081038f4907e3-1024x1024.jpg" },
            { name: "Winston Caster", desc: "–ü–∞—á–∫–∞", price: 23000, category: "tobacco", img: "https://www.sas.am/upload/iblock/17b/306977.jpg" },
            { name: "Esse Change", desc: "–ü–∞—á–∫–∞", price: 30000, category: "tobacco", img: "https://p.turbosquid.com/ts-thumb/q5/LJ4Nj2/NBSJHaac/exw_camera001/jpg/1487610080/1920x1080/fit_q87/767cd9123b7eea1bdd4043fdf76dccc6e08ce76b/exw_camera001.jpg" },

            // --- OTHER ---
            { name: "–ú–∏–Ω–¥–∞–ª—å Ermak", desc: "C–æ–ª—ë–Ω—ã–π, 40–≥", price: 14000, category: "other", img: "https://images.uzum.uz/ccvs5f35a95unf122ntg/original.jpg", isNew: true },
            { name: "–°–æ–ª–µ–Ω—ã–µ —Å—É—à–∫–∏ Ermak", desc: "100–≥", price: 8000, category: "other", img: "https://images.uzum.uz/cps27gj5qt1gj8dcnn10/original.jpg", isNew: true },
            { name: "–°–∞–ª—Ñ–µ—Ç–∫–∏", desc: "–í–ª–∞–∂–Ω—ã–µ 15—à—Ç", price: 3000, category: "other", img: "https://pharmaclick.uz/upload/Sh/imageCache/534/143/1430212791367275.webp",  }
        ];

        // üëâ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID
        const products = productsRaw.map((product, index) => ({
            id: index + 1,
            originalIndex: index,
            ...product
        }))
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã —Ç–æ–≤–∞—Ä—ã —Å isNew=true —à–ª–∏ –ø–µ—Ä–≤—ã–º–∏,
            // –ø—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø–æ originalIndex
            .sort((a, b) => {
                // –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏: —Å–∫–∏–¥–æ—á–Ω—ã–µ, –∑–∞—Ç–µ–º –Ω–æ–≤—ã–µ, –∑–∞—Ç–µ–º –æ–±—ã—á–Ω—ã–µ, –≤ –∫–æ–Ω—Ü–µ ‚Äî –Ω–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏
                const rank = (p) => {
                    if (p.discount) return 0;
                    if (p.isNew) return 1;
                    if (p.outOfStock) return 3;
                    return 2;
                };
                const ra = rank(a);
                const rb = rank(b);
                if (ra === rb) return a.originalIndex - b.originalIndex;
                return ra - rb;
            });

        const categories = [
            { id: 'all', name: '–í—Å–µ —Ç–æ–≤–∞—Ä—ã' },
            { id: 'drinks', name: '–ù–∞–ø–∏—Ç–∫–∏ ü•§' },
            { id: 'sweets', name: '–°–ª–∞–¥–æ—Å—Ç–∏ üç´' },
            { id: 'coffee', name: '–ö–æ—Ñ–µ ‚òï' },
            { id: 'energy_drinks', name: '–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ ‚ö°Ô∏è' },
            { id: 'sport', name: '–°–ø–æ—Ä—Ç üí™' },
            { id: 'tobacco', name: '–¢–∞–±–∞–∫ üö¨' },
            { id: 'other', name: '–†–∞–∑–Ω–æ–µ üß¥' }
        ];

        // –ö–æ—Ä–∑–∏–Ω–∞ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç {id: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ}
        let cart = {};
        let currentTotal = 0;
        let activeCategory = 'all';
        let searchQuery = '';

        const init = () => { renderCategories(); renderProducts(); loadTheme(); calcTotal(); };
        const formatPrice = (p) => p.toLocaleString('ru-RU');

        const renderCategories = () => {
            document.getElementById('categories-container').innerHTML = categories.map(cat =>
                `<div class="cat-pill ${cat.id === activeCategory ? 'active' : ''}" onclick="setCategory('${cat.id}')">${cat.name}</div>`
            ).join('');
        };
        const setCategory = (id) => { activeCategory = (activeCategory === id) ? 'all' : id; renderCategories(); renderProducts(); };
        const handleSearch = () => { searchQuery = document.getElementById('search-input').value.toLowerCase(); renderProducts(); };

        const renderProducts = () => {
            const container = document.getElementById('products-list');
            container.innerHTML = '';
            const filtered = products.filter(p => (activeCategory === 'all' || p.category === activeCategory) && (p.name.toLowerCase().includes(searchQuery) || p.desc.toLowerCase().includes(searchQuery)));

            if (filtered.length === 0) {
                return container.innerHTML = '<div style="text-align:center;padding:40px;opacity:0.6;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ü§∑‚Äç‚ôÇÔ∏è</div>';
            }

            filtered.forEach(item => {
                const qty = cart[item.id] || 0;
                const newClass = item.isNew ? ' new-product' : '';
                const stockClass = item.outOfStock ? ' out-of-stock' : '';
                const discountClass = item.discount ? ' discount-card' : '';
                const newBadge = item.isNew ? '<div class="new-badge">–ù–æ–≤–∏–Ω–∫–∞</div>' : '';
                const outBadge = item.outOfStock ? '<div class="out-badge">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</div>' : '';
                const discountBadge = item.discount ? `<div class="discount-badge">–°–ö–ò–î–ö–ê</div>` : '';

                // –¶–µ–Ω–∞: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É –Ω–∞–¥ –Ω–æ–≤–æ–π, —Å—Ç–∞—Ä–∞—è ‚Äî —Å–µ—Ä–æ–≥–æ —Ü–≤–µ—Ç–∞
                let priceHtml = '';
                if (item.oldprice) {
                    priceHtml = `<div><div class="old-price">${formatPrice(item.oldprice)} —Å—É–º</div><div class="price">${formatPrice(item.price)} —Å—É–º</div></div>`;
                } else {
                    priceHtml = `<div class="price">${formatPrice(item.price)} —Å—É–º</div>`;
                }

                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –¥–ª—è –∫–Ω–æ–ø–æ–∫: –ª–∏–±–æ –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å", –ª–∏–±–æ —Å—á–µ—Ç—á–∏–∫ –∏–ª–∏ –º–µ—Ç–∫–∞ "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏"
                let btnHtml = '';
                if (item.outOfStock) {
                    btnHtml = `<div class="out-label">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</div>`;
                } else if (qty === 0) {
                    btnHtml = `<button class="btn-add" onclick="updateQty(${item.id}, 1)">–î–æ–±–∞–≤–∏—Ç—å</button>`;
                } else {
                    btnHtml = `
                        <div class="counter-widget">
                            <button class="btn-qty" onclick="updateQty(${item.id}, -1)">‚àí</button>
                            <span class="qty-val">${qty}</span>
                            <button class="btn-qty" onclick="updateQty(${item.id}, 1)">+</button>
                        </div>
                    `;
                }

                container.innerHTML += `
                <div class="glass-panel card${newClass}${stockClass}${discountClass}" id="product-${item.id}">
                    ${newBadge}
                    ${outBadge}
                    ${discountBadge}
                    <div class="card-img-container"><img src="${item.img}" class="card-img"></div>
                    <div class="card-info">
                        <div><div class="card-title">${item.name}</div><div class="card-desc">${item.desc}</div></div>
                        <div class="card-bottom">
                            ${priceHtml}
                            ${btnHtml}
                        </div>
                    </div>
                </div>`;
            });
        };

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
        const updateQty = (id, change) => {
            const product = products.find(p => p.id === id);
            if (!product) return;
            if (change > 0 && product.outOfStock) {
                showToast('‚ö†Ô∏è –¢–æ–≤–∞—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç');
                return;
            }

            if (!cart[id]) cart[id] = 0;
            cart[id] += change;

            if (cart[id] <= 0) {
                delete cart[id];
            }

            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ç–æ–ª—å–∫–æ —É –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
            renderProductButton(id);
            calcTotal();
        };

        const renderProductButton = (id) => {
            const productCard = document.getElementById(`product-${id}`);
            if (!productCard) return; // –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–∏—Å–∫–µ), –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º UI –∫–∞—Ä—Ç–æ—á–∫–∏

            const qty = cart[id] || 0;
            const cardBottom = productCard.querySelector('.card-bottom');

            // –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∫–Ω–æ–ø–∫—É –∏–ª–∏ –≤–∏–¥–∂–µ—Ç) –∏ –∑–∞–º–µ–Ω—è–µ–º –µ–≥–æ
            const currentControl = cardBottom.querySelector('.btn-add, .counter-widget, .out-label');

            const product = products.find(p => p.id === id);
            let newHtml = '';
            if (product && product.outOfStock) {
                newHtml = `<div class="out-label">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</div>`;
            } else if (qty === 0) {
                newHtml = `<button class="btn-add" onclick="updateQty(${id}, 1)">–î–æ–±–∞–≤–∏—Ç—å</button>`;
            } else {
                newHtml = `
                    <div class="counter-widget">
                        <button class="btn-qty" onclick="updateQty(${id}, -1)">‚àí</button>
                        <span class="qty-val">${qty}</span>
                        <button class="btn-qty" onclick="updateQty(${id}, 1)">+</button>
                    </div>
                `;
            }

            if (currentControl) {
                currentControl.outerHTML = newHtml;
            }
        };

        // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ê–ù–ò–ú–ê–¶–ò–ò
        const animatePriceChange = () => {
            const priceElement = document.getElementById('total-price');
            // 1. –£–±—Ä–∞—Ç—å –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é, –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –∏–¥–µ—Ç
            priceElement.classList.remove('price-change-anim');
            // 2. –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é (–∏—Å–ø–æ–ª—å–∑—É–µ–º requestAnimationFrame –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Å–±—Ä–æ—Å–∞)
            requestAnimationFrame(() => {
                priceElement.classList.add('price-change-anim');
            });
            // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–±—Ä–æ—Å–∞ –∫–ª–∞—Å—Å–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                priceElement.classList.remove('price-change-anim');
            }, 500); // 500–º—Å, —á—Ç–æ–±—ã –¥–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ pricePulse (0.4—Å) –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è
        };
        // –ö–û–ù–ï–¶ –ù–û–í–û–ô –§–£–ù–ö–¶–ò–ò

        const calcTotal = () => {
            let total = 0;
            // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º —Ç–æ–≤–∞—Ä—ã –∏ —É–º–Ω–æ–∂–∞–µ–º —Ü–µ–Ω—É –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —É—á–∏—Ç—ã–≤–∞—è —Å–∫–∏–¥–∫–∏
            products.forEach(p => {
                if (cart[p.id]) {
                    const unit = p.price; // discount ‚Äî —Ç–æ–ª—å–∫–æ —Å—Ç–∞–π–ª, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ü–µ–Ω—É
                    total += unit * cart[p.id];
                }
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ –æ–±—â–∞—è —Å—É–º–º–∞
            if (currentTotal !== total) {
                currentTotal = total;
                // –ê–ù–ò–ú–ê–¶–ò–Ø –í–´–ó–´–í–ê–ï–¢–°–Ø –ó–î–ï–°–¨
                animatePriceChange();
            }

            document.getElementById('total-price').innerText = formatPrice(total) + " —Å—É–º";
        };

        const showToast = (msg) => {
            const t = document.getElementById('toast');
            t.innerHTML = msg;
            t.classList.add('visible');
            setTimeout(() => t.classList.remove('visible'), 2000);
        };

        const copyCard = () => navigator.clipboard.writeText("9860240101856518").then(() => showToast("üí≥ –ö–∞—Ä—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!"));

        const copyTotal = () => {
            if (currentTotal > 0) {
                navigator.clipboard.writeText(String(currentTotal)).then(() => showToast(`üí∞ –°—É–º–º–∞ ${formatPrice(currentTotal)} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!`));
            } else {
                showToast("‚ö†Ô∏è –°—É–º–º–∞ 0. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä.");
            }
        };

        const goToClickPayment = () => window.location.href = "https://my.click.uz/clickp2p/1B6C37BC3128B9ED711AD4DC6FCFE817DE4E0B35BBFD355B765EC0924C844830";

        const toggleTheme = () => {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        };

        const loadTheme = () => {
            if (localStorage.getItem('theme') === 'dark' || (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.body.classList.add('dark-mode');
            }
        };

        init();
    </script>
</body>

</html>